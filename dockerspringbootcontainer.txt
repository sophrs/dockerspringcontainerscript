#!/bin/bash

mvn clean package

#build new image 
docker build -t spring-boot-hello-world:latest .

#clean up
docker stop $(docker ps -qa)
docker rm $(docker ps -qa)

# check if there are any dangling images (<none>)
if docker images | grep '<none>'; then
        docker rmi $(docker images -q -f dangling=true)
fi

#run
docker run -d -p 9000:9000 spring-boot-hello-world

